{"mappings":"AAAA,MAKMA,EAAaC,SAASC,cAAc,kBACpCC,EAAUF,SAASC,cAAc,iBACjCE,EAAWH,SAASC,cAAc,wBAOxCG,eAAeC,EAAUC,GACrB,MAAMC,QAAiBC,MAAMF,GACzB,IAAKC,EAASE,GACd,MAAM,IAAIC,MAAMC,SAASC,YAE7B,OAAOL,EAASM,M,CAGpB,SAASC,EAAaC,GAClB,MAAMC,EAASD,EAAIE,KAAKC,GACb,mFACsCA,EAAGC,eAAeD,EAAGE,2DACxBF,EAAGG,4DACNH,EAAGI,+HAEIJ,EAAGK,iDACtBL,EAAGM,6IAG/BC,KAAK,IAER1B,EAAW2B,mBAAmB,YAAaV,E,CA1B/Cd,EAAQyB,iBAAiB,UA2IzB,SAAkBC,GACdA,EAAEC,iBA1DF9B,EAAW+B,UAAY,GAuCTC,EAqBLC,EAnBT3B,EADkB,8DAA8D0B,8CAC3DE,MAAKC,IACtBC,QAAQC,IAAIF,EAAI3B,SAAS8B,MACQ,IAA7BH,EAAI3B,SAAS8B,KAAKC,QAClBH,QAAQC,IAAI,SAEpBtB,EAA0BoB,EAAI3B,SAAS8B,KA1CpBpB,KAAIC,IAClB,SAASqB,IACN,OAAIrB,EAAGsB,SAASF,OAAS,IACdpB,EAAGsB,SAASC,MAAM,EAAG,KAAO,MAEhCvB,EAAGsB,Q,CAEd,MAAMlB,EAAQiB,IACRG,EAAa,IAAIC,KAAKzB,EAAG0B,UACzBrB,GAAO,IAAIsB,KAAKC,gBAAiBC,OAAOL,GAC9C,SAASM,IACL,OAAI9B,EAAG+B,SAASC,KAAKZ,OAAS,GACnBpB,EAAG+B,SAASC,KAAKT,MAAM,EAAG,IAAM,MAEpCvB,EAAG+B,SAASC,I,CAEvB,MAAM7B,EAAQ2B,IACRxB,EAASN,EAAGiC,QACZC,EAAYlC,EAAGmC,WAErB,SAASC,IACL,OAAyB,IAArBF,EAAUd,OACH,4FAEJ,4BAA4Bc,EAAU,GAAGG,K,CAKpD,MAAO,C,MAAEjC,E,KAAOC,E,MAAMF,E,OAAOG,E,MAHf8B,I,IACF,cAEqC,IAaR,IAPjD,IAAkBvB,C,IAxHlB5B,EAASwB,iBAAiB,SAsI1B,SAAmBC,GACfI,EAAYJ,EAAE4B,OAAOC,MAAMC,M,IA/D3BrD,EAjFW,qGAiFO4B,MAAKC,IACvBC,QAAQC,IAAIF,EAAIyB,SAEhB7C,EAA0BoB,EAAIyB,QA9CX1C,KAAIC,IAOnB,MAAMI,EALEJ,EAAGsB,SAASF,OAAS,IACdpB,EAAGsB,SAASC,MAAM,EAAG,KAAO,MAEhCvB,EAAGsB,SAGRE,EAAa,IAAIC,KAAKzB,EAAG0C,gBA2B/B,MAAO,C,MAAEtC,E,MA1BI,IAAIuB,KAAKC,gBAAiBC,OAAOL,G,MAEtCxB,EAAGG,MAAMiB,OAAS,GACXpB,EAAGG,MAAMoB,MAAM,EAAG,IAAM,MAE5BvB,EAAGG,M,OAICH,EAAGqC,I,MAEU,IAApBrC,EAAG2C,MAAMvB,OACF,4FAEJpB,EAAG2C,MAAM,GAAG,kBAAkB,GAAGN,I,IAIhB,IAApBrC,EAAG2C,MAAMvB,OACF,uBAEJpB,EAAG2C,MAAM,GAAGC,QAK0B,IAClDrB,MAAM,EAAG,GAU2B,IA0D3C,IAAIT,EAAY","sources":["src/js/news-page.js"],"sourcesContent":["const API_KEY = 'pJnhjsndYoXEeiZxcLsx3UMkwINk9PiQ';\nconst reqUrl = `https://api.nytimes.com/svc/mostpopular/v2/viewed/1.json?api-key=${API_KEY}`;\n\n\n\nconst galleryRef = document.querySelector('.gallery__list');\nconst formRef = document.querySelector('.search-field');\nconst inputRef = document.querySelector('#search-field__input');\n\nformRef.addEventListener('submit', onSubmit);\ninputRef.addEventListener('input', createReq);\n\n\n\nasync function fetchNews(request) {\n    const response = await fetch(request);\n        if (!response.ok) {\n        throw new Error(responce.statusText);\n        };\n    return response.json();\n    };\n\nfunction createMarkup(arr) {\n    const markup = arr.map((el) => {\n        return ` <li class=\"gallery__item\">\n                    <img class=\"gallery__img\" src=\"${el.image}\" alt=\"${el.alt}\"/>\n                    <h3 class=\"gallery__header\">${el.title}</h3>\n                    <p class=\"gallery__text\">${el.descr}</p>\n                    <div class=\"gallery__item-bottom_wrap\">\n                        <span class=\"gallery__date\">${el.date}</span>\n                        <a href=\"${el.source}\" target=\"_blank\" rel=\"noreferrer noopener\" class=\"gallery__link\">Read more</a>\n                    </div>\n                </li>`\n    }).join('');\n    // console.log(markup);\n    galleryRef.insertAdjacentHTML('beforeend', markup);\n};\n\nfunction normalizePop(feed) {\n    const marks = feed.map(el => {\n        function checkoutDescr() {\n            if (el.abstract.length > 120) {\n                return el.abstract.slice(0, 119) + '...';\n            }\n            return el.abstract;\n        }\n        const descr = checkoutDescr();\n        const dateFormat = new Date(el.published_date);\n        const date = new Intl.DateTimeFormat().format(dateFormat);\n        function ckeckoutTit() {\n            if (el.title.length > 50) {\n                return el.title.slice(0, 49) + '...';\n            }\n            return el.title;\n        }\n        const title = ckeckoutTit();\n        // console.log(title.length);\n        const source = el.url;\n        function checkoutImg() {\n            if (el.media.length === 0) {\n                return 'https://t3.ftcdn.net/jpg/04/62/93/66/360_F_462936689_BpEEcxfgMuYPfTaIAOC1tCDurmsno7Sp.jpg';\n            }\n            return el.media[0]['media-metadata'][2].url;\n        }\n        const image = checkoutImg();\n        function checkoutAlt() {\n            if (el.media.length === 0) {\n                return 'Image is no avalible';\n            }\n            return el.media[0].caption;\n        }\n        const alt = checkoutAlt();\n        // console.log(alt);\n        // console.log(image);\n        return { descr, date, title, source, image, alt };\n    }).slice(0, 8);\n    // console.log(marks);\n    return marks;\n\n}\n\nfunction startFetch() {\n    fetchNews(reqUrl).then(res => {\n    console.log(res.results);\n        \n    createMarkup(normalizePop(res.results));\n    });\n};\nstartFetch();\n\nfunction clearMarkup() {\n    galleryRef.innerHTML = '';\n};\n\nfunction normalizeSrc(feed) {\n    const marks = feed.map(el => {\n         function checkoutDescr() {\n            if (el.abstract.length > 120) {\n                return el.abstract.slice(0, 119) + '...';\n            }\n            return el.abstract;\n        }\n        const descr = checkoutDescr();\n        const dateFormat = new Date(el.pub_date);\n        const date = new Intl.DateTimeFormat().format(dateFormat);\n        function ckeckoutTit() {\n            if (el.headline.main.length > 50) {\n                return el.headline.main.slice(0, 49) + '...';\n            }\n            return el.headline.main;\n        }\n        const title = ckeckoutTit();\n        const source = el.web_url;\n        const imagePart = el.multimedia;\n        \n        function checkoutImg() {\n            if (imagePart.length === 0) {\n                return 'https://t3.ftcdn.net/jpg/04/62/93/66/360_F_462936689_BpEEcxfgMuYPfTaIAOC1tCDurmsno7Sp.jpg';\n            }\n            return `https://static01.nyt.com/${imagePart[0].url}`;\n        }\n        const image = checkoutImg();\n        const alt = 'New`s image';\n        // console.log(image);\n        return { descr, date, title, source, image, alt };\n    });\n    // console.log(marks);\n    return marks;\n}\n\nfunction onSearch(inputData) {\n    const searchUrl = `https://api.nytimes.com/svc/search/v2/articlesearch.json?q=${inputData}&api-key=${API_KEY}`;\n    fetchNews(searchUrl).then(res => {\n        console.log(res.response.docs);\n        if (res.response.docs.length === 0) {\n            console.log('Empty');\n        }\n    createMarkup(normalizeSrc(res.response.docs));\n    });\n};\n\n// onSearch('ukraine');\n\nlet searchReq = '';\nfunction createReq(e) {\n    searchReq = e.target.value.trim();\n    // console.log(searchReq);\n};\nfunction onSubmit(e) {\n    e.preventDefault();\n    clearMarkup();\n    onSearch(searchReq);\n\n};\n\n// const encoded = encodeURIComponent('crosswords & games'); //crosswords%20&%20games"],"names":["$79f308477d4df87e$var$galleryRef","document","querySelector","$79f308477d4df87e$var$formRef","$79f308477d4df87e$var$inputRef","async","$79f308477d4df87e$var$fetchNews","request","response","fetch","ok","Error","responce","statusText","json","$79f308477d4df87e$var$createMarkup","arr","markup","map","el","image","alt","title","descr","date","source","join","insertAdjacentHTML","addEventListener","e","preventDefault","innerHTML","inputData","$79f308477d4df87e$var$searchReq","then","res","console","log","docs","length","checkoutDescr","abstract","slice","dateFormat","Date","pub_date","Intl","DateTimeFormat","format","ckeckoutTit","headline","main","web_url","imagePart","multimedia","checkoutImg","url","target","value","trim","results","published_date","media","caption"],"version":3,"file":"index.30d995f2.js.map"}