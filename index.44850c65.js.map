{"mappings":"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","sources":["src/js/news-page.js","src/js/functions/fetchNews.js","src/js/pagination.js","src/js/weather.js","src/js/functions/markup.js"],"sourcesContent":["\nimport { mqHandler } from './functions/mqHandler'\nimport { refs } from './refs';\n\nimport {fetchNews} from './functions/fetchNews';\nimport {createMarkup} from './functions/markup';\nimport {clearMarkup} from './functions/markup';\nimport {normalizePop} from './functions/markup';\nimport {normalizeSrc}  from './functions/markup';\nimport {markData} from './functions/markup';\nimport {itemsPerPage} from './functions/markup';\nimport {page} from './functions/markup';\n\nlet totalItems = 0;\nlet totalPages = 0;\nexport {totalPages};\n\n\n\nconst formRef = document.querySelector('.search-field');\nconst inputRef = document.querySelector('#search-field__input');\n\n\n\nformRef.addEventListener('submit', onSubmit);\ninputRef.addEventListener('input', createReq);\n\n\n\n\nfetchNews('/svc/mostpopular/v2/viewed/1.json', {\t\t\n    })\t\t\n      .then(data => {\t\t\n        totalItems = data.results.length;\n        \n        totalPages = Math.ceil(data.results.length / itemsPerPage);\t\t\n        normalizePop(data.results);\n        // console.log(page);\n        createMarkup(markData, page)\t\t\n        // Do something with the data\t\t\n    })\t\t\n    .catch(error => {\t\t\n        console.error(error);\t\t\n        // Handle the error\t\t\n    });\n\n\nfunction onSearch(inputData) {\n  fetchNews('/svc/search/v2/articlesearch.json', {\n      q: inputData,\n      page: '1',\n    }).then(data => {\n      totalItems = data.response.docs.length;\n      \n      totalPages = Math.ceil(data.response.docs.length / itemsPerPage);\n      // console.log(totalItems);\n      if (data.response.docs.length === 0) {\n          // console.log('Empty');\n      }\n      normalizeSrc(data.response.docs);\n      createMarkup(markData, page);\n  });\n};\n\n// onSearch('ukraine');\n\nlet searchReq = '';\n\nfunction createReq(e) {\n  searchReq = e.target.value.trim();\n  // console.log(searchReq);\n}\nfunction onSubmit(e) {\n  e.preventDefault();\n  clearMarkup();\n  onSearch(searchReq);\n}\n\n// const encoded = encodeURIComponent('crosswords & games'); //crosswords%20&%20games","const baseUrl = 'https://api.nytimes.com';\nconst apiKey = 'TSw2QdOoFucel7ybh9h7kC4obHmkxxGl';\n\n\n\nasync function fetchNews(endpoint, queryParams = {}) {\n  const queryString = Object.entries(queryParams)\n    .map(([key, value]) => `${key}=${value}`)\n    .join('&');\n  const url = `${baseUrl}${endpoint}?${queryString}&api-key=${apiKey}`;\n  try {\n    const response = await fetch(url);\n    if (!response.ok) {\n      throw new Error(`Failed to fetch data from ${url}`);\n    }\n    return await response.json();\n  } catch (error) {\n    console.error(error);\n    throw new Error(`Failed to fetch data from ${url}`);\n  }\n}\n\nexport {fetchNews};\n\n\n\n// Приклад використання для запиту списку категорій\n\n// fetchNews('/svc/news/v3/content/section-list.json')\n//   .then(data => {\n//     console.log(data);\n//     // Do something with the data\n//   })\n//   .catch(error => {\n//     console.error(error);\n//     // Handle the error\n//   });\n\n\n\n// Приклад використання для запиту статей з категорії world\n\n// fetchNews('/svc/news/v3/content/inyt/world.json')\n//   .then(data => {\n//     console.log(data);\n//     // Do something with the data\n//   })\n//   .catch(error => {\n//     console.error(error);\n//     // Handle the error\n//   });\n\n\n// Приклад використання для пошуку статей за запитом \"climate change\"\n//  (можна використати змінну в якій зберігається слова з запитом)\n//  також можна вказати номер сторінки в результаті пошуку у влативості page\n\n// fetchNews('/svc/search/v2/articlesearch.json', {\n//   q: 'climate change',\n//   page: '1',\n// })\n//   .then(data => {\n//     console.log(data);\n//     // Do something with the data\n//   })\n//   .catch(error => {\n//     console.error(error);\n//     // Handle the error\n//   });\n\n\n// Приклад використання для запиту популярних статей\n\n// fetchNews('/svc/mostpopular/v2/viewed/1.json', {})\n//   .then(data => {\n//     console.log(data);\n//     // Do something with the data\n//   })\n//   .catch(error => {\n//     console.error(error);\n//     // Handle the error\n//   });\n","import {createMarkup} from './functions/markup';\nimport {clearMarkup} from './functions/markup';\nimport {markData} from './functions/markup';\n// import {normalizeSrc}  from './functions/markup';\n\nconst paginationContainer = document.getElementById('pagination');\nfunction initPagination(totalPages) {\n  const pagination = new tui.Pagination(paginationContainer, {\n    totalItems: totalPages,\n    itemsPerPage: 1,\n    visiblePages: 3,\n  });\n    pagination.on('beforeMove', event => {\n    const currentPage = event.page;\n    clearMarkup();\n    createMarkup(markData, currentPage);\n  });\n}\nexport {initPagination};","\nexport let weather = `<div class=\"weather\">\n<div class=\"weather_wrap\">\n<p class=\"weather_degree\">23&deg</p>\n<div class=\"weather_part\">\n<p class=\"weather_character gallery__text\">Sunny</p>\n<button type=\"button\" class=\"weather_location\"><p class=\"weather_country\"></p>West Jakarta</p></button>\n</div>\n</div>\n<img src=\"../images/Sun.png\" width=\"121\" class=\"weather_image\">\n<p class=\"weather_character alighn\">Mon<br>\n21 Jan 2021</p>\n<button type=\"button\" class=\"weather_week\"><p class=\"\">weather for week</p></button>\n</div>`","import {initPagination} from '../pagination'\nimport {totalPages} from '../news-page';\nimport {mqHandler} from './mqHandler'\nimport {weather} from '../weather';\n\n\nlet srartIndex = 0;\nlet endIndex = 0;\nlet itemsPerPage = 8;\nexport {itemsPerPage};\n\nlet page = 1;\nexport {page};\n\nlet markData = {};\nexport {markData};\n\nconst emptyCard = `<li class=\"gallery__item\">${weather}</li>`;\nconst ICON_HEART = '/sprite.f14d31f7.svg#icon-heart';\nconst galleryRef = document.querySelector('.gallery__list');\n\n\nfunction createMarkup(arr, page) {\n    srartIndex = (page - 1) * itemsPerPage;\n    endIndex = srartIndex + itemsPerPage;\n    initPagination(totalPages);\n  \n    const markup = arr.map(el => {\n      return `<li class=\"gallery__item\">\n                     <div class=\"gallery__thumb\"> <p class=\"gallery__category\">Job searching</p>\n                      <img class=\"gallery__img\" src=\"${el.image}\" alt=\"${el.alt}\"/>\n                      <div class='gallery__favorite'><p>Add to favorite</p>\n                      <button type=\"button\"></button>\n                      <svg width='16' height='16'><use href=\"${ICON_HEART}\"></use>\n                      </svg></div></div>\n                      <h3 class=\"gallery__header\">${el.title}</h3>\n                      <p class=\"gallery__text\">${el.descr}</p>\n                      <div class=\"gallery__item-bottom_wrap\">\n                          <span class=\"gallery__date\">${el.date}</span>\n                          <a href=\"${el.source}\" target=\"_blank\" rel=\"noreferrer noopener\" class=\"gallery__link\">Read more</a>\n                      </div>\n                  </li>`;\n    });\n    const pageMarkup = markup.slice(srartIndex, endIndex);\n    // console.log(pageMarkup);\n    pageMarkup.splice(2, 0, emptyCard);\n    const finishedMkp = pageMarkup.join('');\n    // console.log(finishedMkp);\n    console.log(\"BEFORE\");\n    galleryRef.insertAdjacentHTML('beforeend', finishedMkp);\n    mqHandler(); //додана функція для адаптивного відображення.\n  }\n  \n  export {createMarkup};\n\nfunction normalizePop(feed) {\n    const marks = feed.map(el => {\n      function checkoutDescr() {\n        if (el.abstract.length > 120) {\n          return el.abstract.slice(0, 119) + '...';\n        }\n        return el.abstract;\n      }\n      const descr = checkoutDescr();\n      const dateFormat = new Date(el.published_date);\n      const date = new Intl.DateTimeFormat().format(dateFormat);\n      function ckeckoutTit() {\n        if (el.title.length > 50) {\n          return el.title.slice(0, 49) + '...';\n        }\n        return el.title;\n      }\n      const title = ckeckoutTit();\n      // console.log(title.length);\n      const source = el.url;\n      function checkoutImg() {\n        if (el.media.length === 0) {\n          return 'https://t3.ftcdn.net/jpg/04/62/93/66/360_F_462936689_BpEEcxfgMuYPfTaIAOC1tCDurmsno7Sp.jpg';\n        }\n        return el.media[0]['media-metadata'][2].url;\n      }\n      const image = checkoutImg();\n      function checkoutAlt() {\n        if (el.media.length === 0) {\n          return 'Image is no avalible';\n        }\n        return el.media[0].caption;\n      }\n      const alt = checkoutAlt();\n      // console.log(alt);\n      // console.log(image);\n  \n      return { descr, date, title, source, image, alt };\n    });\n    // console.log(marks);\n    markData = marks;\n    // console.log(markData);\n    return markData;\n  }\n\n  export {normalizePop};\n\nfunction clearMarkup() {\n    galleryRef.innerHTML = '';\n  }\n  \n  export {clearMarkup};\n  \nfunction normalizeSrc(feed) {\n    const marks = feed.map(el => {\n      function checkoutDescr() {\n        if (el.abstract.length > 120) {\n          return el.abstract.slice(0, 119) + '...';\n        }\n        return el.abstract;\n      }\n      const descr = checkoutDescr();\n      const dateFormat = new Date(el.pub_date);\n      const date = new Intl.DateTimeFormat().format(dateFormat);\n      function ckeckoutTit() {\n        if (el.headline.main.length > 50) {\n          return el.headline.main.slice(0, 49) + '...';\n        }\n        return el.headline.main;\n      }\n      const title = ckeckoutTit();\n      const source = el.web_url;\n      const imagePart = el.multimedia;\n  \n      function checkoutImg() {\n        if (imagePart.length === 0) {\n          return 'https://t3.ftcdn.net/jpg/04/62/93/66/360_F_462936689_BpEEcxfgMuYPfTaIAOC1tCDurmsno7Sp.jpg';\n        }\n        return `https://static01.nyt.com/${imagePart[0].url}`;\n      }\n      const image = checkoutImg();\n      const alt = 'New`s image';\n      // console.log(image);\n      return { descr, date, title, source, image, alt };\n    });\n    // console.log(marks);\n    markData = marks;\n    return markData;\n  }\n  \n  export {normalizeSrc};\n\n"],"names":["parcelRequire","async","$f037ddeb59b122d6$export$cadad47cc1e7eb14","endpoint","queryParams","url","Object","entries","map","key","value","join","response","fetch","ok","Error","json","error","console","$1bab9c519cfa82bc$var$paginationContainer","document","getElementById","$bfd7280d0b184fc2$var$srartIndex","$bfd7280d0b184fc2$var$endIndex","$bfd7280d0b184fc2$export$e55558ac6f857a69","$bfd7280d0b184fc2$var$galleryRef","querySelector","$bfd7280d0b184fc2$export$24783e9f3a24abe4","arr","page1","totalPages","$79f308477d4df87e$export$828d4f39ed844b18","tui","Pagination","totalItems","itemsPerPage","visiblePages","on","event","currentPage","page","$bfd7280d0b184fc2$export$d1927cf3bc385580","pageMarkup","el","image","alt","title","descr","date","source","slice","splice","finishedMkp","log","insertAdjacentHTML","$23aE7","mqHandler","$bfd7280d0b184fc2$export$2aca9d339dc2d5bf","feed","marks","abstract","length","dateFormat","Date","published_date","Intl","DateTimeFormat","format","media","caption","innerHTML","$79f308477d4df87e$var$totalItems","$79f308477d4df87e$var$formRef","$79f308477d4df87e$var$inputRef","addEventListener","e","preventDefault","inputData","$79f308477d4df87e$var$searchReq","q","then","data","docs","Math","ceil","pub_date","headline","main","web_url","imagePart","multimedia","target","trim","results","catch"],"version":3,"file":"index.44850c65.js.map"}