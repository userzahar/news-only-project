{"mappings":"AAAA,MAGMA,EAAaC,SAASC,cAAc,kBACpCC,EAAUF,SAASC,cAAc,iBACjCE,EAAWH,SAASC,cAAc,wBAExCC,EAAQE,iBAAiB,UAoJzB,SAAkBC,GAChBA,EAAEC,iBA1DFP,EAAWQ,UAAY,GAuCPC,EAqBPC,EAnBTC,EADkB,8DAA8DF,8CAC3DG,MAAKC,IACxBC,QAAQC,IAAIF,EAAIG,SAASC,MACQ,IAA7BJ,EAAIG,SAASC,KAAKC,QACpBJ,QAAQC,IAAI,SAEdI,EAA0BN,EAAIG,SAASC,KA1CtBG,KAAIC,IACrB,SAASC,IACP,OAAID,EAAGE,SAASL,OAAS,IAChBG,EAAGE,SAASC,MAAM,EAAG,KAAO,MAE9BH,EAAGE,Q,CAEZ,MAAME,EAAQH,IACRI,EAAa,IAAIC,KAAKN,EAAGO,UACzBC,GAAO,IAAIC,KAAKC,gBAAiBC,OAAON,GAC9C,SAASO,IACP,OAAIZ,EAAGa,SAASC,KAAKjB,OAAS,GACrBG,EAAGa,SAASC,KAAKX,MAAM,EAAG,IAAM,MAElCH,EAAGa,SAASC,I,CAErB,MAAMC,EAAQH,IACRI,EAAShB,EAAGiB,QACZC,EAAYlB,EAAGmB,WAErB,SAASC,IACP,OAAyB,IAArBF,EAAUrB,OACL,4FAEF,4BAA4BqB,EAAU,GAAGG,K,CAKlD,MAAO,C,MAAEjB,E,KAAOI,E,MAAMO,E,OAAOC,E,MAHfI,I,IACF,cAEqC,IAaJ,IAPjD,IAAkBhC,C,IAjIlBL,EAASC,iBAAiB,SA+I1B,SAAmBC,GACjBI,EAAYJ,EAAEqC,OAAOC,MAAMC,M,IA5I7BC,eAAenC,EAAUoC,GACvB,MAAM/B,QAAiBgC,MAAMD,GAC7B,IAAK/B,EAASiC,GACZ,MAAM,IAAIC,MAAMC,SAASC,YAE3B,OAAOpC,EAASqC,M,CAGlB,SAASlC,EAAamC,GACpB,MAAMC,EAASD,EAAIlC,KAAIC,GACd,sJAE0CA,EAAGmC,eAAenC,EAAGoC,sPAGxBpC,EAAGe,4DACNf,EAAGI,+HAEIJ,EAAGQ,iDACtBR,EAAGgB,6IAIlCkB,EAAOG,OAAO,EAAG,EAzBH,mCA0Bd,MAAMC,EAAcJ,EAAOK,KAAK,IAChC9C,QAAQC,IAAI4C,GAGZ3D,EAAW6D,mBAAmB,YAAaF,E,CAiD7ChD,EAxFa,qGAwFKC,MAAKC,IACrBC,QAAQC,IAAIF,EAAIiD,SAEhB3C,EAhDJ,SAAsB4C,GACpB,MAAMC,EAAQD,EACX3C,KAAIC,IAOH,MAAMI,EALAJ,EAAGE,SAASL,OAAS,IAChBG,EAAGE,SAASC,MAAM,EAAG,KAAO,MAE9BH,EAAGE,SAGNG,EAAa,IAAIC,KAAKN,EAAG4C,gBA2B/B,MAAO,C,MAAExC,E,MA1BI,IAAIK,KAAKC,gBAAiBC,OAAON,G,MAExCL,EAAGe,MAAMlB,OAAS,GACbG,EAAGe,MAAMZ,MAAM,EAAG,IAAM,MAE1BH,EAAGe,M,OAIGf,EAAGqB,I,MAEQ,IAApBrB,EAAG6C,MAAMhD,OACJ,4FAEFG,EAAG6C,MAAM,GAAG,kBAAkB,GAAGxB,I,IAIhB,IAApBrB,EAAG6C,MAAMhD,OACJ,uBAEFG,EAAG6C,MAAM,GAAGC,QAK4B,IAElD3C,MAAM,EAAG,GAEZ,OADAV,QAAQC,IAAIiD,GACLA,C,CAOQI,CAAavD,EAAIiD,SAAS,IA0D3C,IAAIpD,EAAY,GAYhB,MACM2D,EADM,CAAC,EAAG,EAAG,GACFT,KAAK,IACtB9C,QAAQC,IAAIsD","sources":["src/js/news-page.js"],"sourcesContent":["const API_KEY = 'pJnhjsndYoXEeiZxcLsx3UMkwINk9PiQ';\nconst reqUrl = `https://api.nytimes.com/svc/mostpopular/v2/viewed/1.json?api-key=${API_KEY}`;\n\nconst galleryRef = document.querySelector('.gallery__list');\nconst formRef = document.querySelector('.search-field');\nconst inputRef = document.querySelector('#search-field__input');\n\nformRef.addEventListener('submit', onSubmit);\ninputRef.addEventListener('input', createReq);\n\nconst emptyCard = '<li class=\"gallery__item\"></li>';\n\nasync function fetchNews(request) {\n  const response = await fetch(request);\n  if (!response.ok) {\n    throw new Error(responce.statusText);\n  }\n  return response.json();\n}\n\nfunction createMarkup(arr) {\n  const markup = arr.map(el => {\n    return `<li class=\"gallery__item\">\n                    <p class=\"gallery__category\">Job searching</p>\n                    <img class=\"gallery__img\" src=\"${el.image}\" alt=\"${el.alt}\"/>\n                    <button class=\"gallery__favorite\">Add to favorite <svg width=\"16\" height=\"16\">\n                    <use href=\"../images/sprite.svg#icon-heart\"></use></svg></button>\n                    <h3 class=\"gallery__header\">${el.title}</h3>\n                    <p class=\"gallery__text\">${el.descr}</p>\n                    <div class=\"gallery__item-bottom_wrap\">\n                        <span class=\"gallery__date\">${el.date}</span>\n                        <a href=\"${el.source}\" target=\"_blank\" rel=\"noreferrer noopener\" class=\"gallery__link\">Read more</a>\n                    </div>\n                </li>`\n    });\n    markup.splice(2, 0, emptyCard);\n    const finishedMkp = markup.join('');\n    console.log(finishedMkp);\n    // console.log(markup);\n \n    galleryRef.insertAdjacentHTML('beforeend', finishedMkp);\n};\n\n\nfunction normalizePop(feed) {\n  const marks = feed\n    .map(el => {\n      function checkoutDescr() {\n        if (el.abstract.length > 120) {\n          return el.abstract.slice(0, 119) + '...';\n        }\n        return el.abstract;\n      }\n      const descr = checkoutDescr();\n      const dateFormat = new Date(el.published_date);\n      const date = new Intl.DateTimeFormat().format(dateFormat);\n      function ckeckoutTit() {\n        if (el.title.length > 50) {\n          return el.title.slice(0, 49) + '...';\n        }\n        return el.title;\n      }\n      const title = ckeckoutTit();\n      // console.log(title.length);\n      const source = el.url;\n      function checkoutImg() {\n        if (el.media.length === 0) {\n          return 'https://t3.ftcdn.net/jpg/04/62/93/66/360_F_462936689_BpEEcxfgMuYPfTaIAOC1tCDurmsno7Sp.jpg';\n        }\n        return el.media[0]['media-metadata'][2].url;\n      }\n      const image = checkoutImg();\n      function checkoutAlt() {\n        if (el.media.length === 0) {\n          return 'Image is no avalible';\n        }\n        return el.media[0].caption;\n      }\n      const alt = checkoutAlt();\n      // console.log(alt);\n      // console.log(image);\n      return { descr, date, title, source, image, alt };\n    })\n    .slice(0, 8);\n  console.log(marks);\n  return marks;\n}\n\nfunction startFetch() {\n  fetchNews(reqUrl).then(res => {\n    console.log(res.results);\n\n    createMarkup(normalizePop(res.results));\n  });\n}\nstartFetch();\n\nfunction clearMarkup() {\n  galleryRef.innerHTML = '';\n}\n\nfunction normalizeSrc(feed) {\n  const marks = feed.map(el => {\n    function checkoutDescr() {\n      if (el.abstract.length > 120) {\n        return el.abstract.slice(0, 119) + '...';\n      }\n      return el.abstract;\n    }\n    const descr = checkoutDescr();\n    const dateFormat = new Date(el.pub_date);\n    const date = new Intl.DateTimeFormat().format(dateFormat);\n    function ckeckoutTit() {\n      if (el.headline.main.length > 50) {\n        return el.headline.main.slice(0, 49) + '...';\n      }\n      return el.headline.main;\n    }\n    const title = ckeckoutTit();\n    const source = el.web_url;\n    const imagePart = el.multimedia;\n\n    function checkoutImg() {\n      if (imagePart.length === 0) {\n        return 'https://t3.ftcdn.net/jpg/04/62/93/66/360_F_462936689_BpEEcxfgMuYPfTaIAOC1tCDurmsno7Sp.jpg';\n      }\n      return `https://static01.nyt.com/${imagePart[0].url}`;\n    }\n    const image = checkoutImg();\n    const alt = 'New`s image';\n    // console.log(image);\n    return { descr, date, title, source, image, alt };\n  });\n  // console.log(marks);\n  return marks;\n}\n\nfunction onSearch(inputData) {\n  const searchUrl = `https://api.nytimes.com/svc/search/v2/articlesearch.json?q=${inputData}&api-key=${API_KEY}`;\n  fetchNews(searchUrl).then(res => {\n    console.log(res.response.docs);\n    if (res.response.docs.length === 0) {\n      console.log('Empty');\n    }\n    createMarkup(normalizeSrc(res.response.docs));\n  });\n}\n\n// onSearch('ukraine');\n\nlet searchReq = '';\nfunction createReq(e) {\n  searchReq = e.target.value.trim();\n  // console.log(searchReq);\n}\nfunction onSubmit(e) {\n  e.preventDefault();\n  clearMarkup();\n  onSearch(searchReq);\n}\n\n// const encoded = encodeURIComponent('crosswords & games'); //crosswords%20&%20games\nconst are = [1, 2, 3];\nconst are1 = are.join('');\nconsole.log(are1);\n"],"names":["$79f308477d4df87e$var$galleryRef","document","querySelector","$79f308477d4df87e$var$formRef","$79f308477d4df87e$var$inputRef","addEventListener","e","preventDefault","innerHTML","inputData","$79f308477d4df87e$var$searchReq","$79f308477d4df87e$var$fetchNews","then","res","console","log","response","docs","length","$79f308477d4df87e$var$createMarkup","map","el","checkoutDescr","abstract","slice","descr","dateFormat","Date","pub_date","date","Intl","DateTimeFormat","format","ckeckoutTit","headline","main","title","source","web_url","imagePart","multimedia","checkoutImg","url","target","value","trim","async","request","fetch","ok","Error","responce","statusText","json","arr","markup","image","alt","splice","finishedMkp","join","insertAdjacentHTML","results","feed","marks","published_date","media","caption","$79f308477d4df87e$var$normalizePop","$79f308477d4df87e$var$are1"],"version":3,"file":"index.82c9a647.js.map"}