const e=document.querySelector(".gallery__list"),t=document.querySelector(".search-field"),a=document.querySelector("#search-field__input"),n=document.getElementById("pagination");t.addEventListener("submit",(function(e){e.preventDefault(),u(),t=g,o(`https://api.nytimes.com/svc/search/v2/articlesearch.json?q=${t}&api-key=pJnhjsndYoXEeiZxcLsx3UMkwINk9PiQ`).then((e=>{console.log(e.response.docs),0===e.response.docs.length&&console.log("Empty"),function(e){const t=e.map((e=>{function t(){return e.abstract.length>120?e.abstract.slice(0,119)+"...":e.abstract}const a=t(),n=new Date(e.pub_date),s=(new Intl.DateTimeFormat).format(n);function i(){return e.headline.main.length>50?e.headline.main.slice(0,49)+"...":e.headline.main}const l=i(),r=e.web_url,c=e.multimedia;function o(){return 0===c.length?"https://t3.ftcdn.net/jpg/04/62/93/66/360_F_462936689_BpEEcxfgMuYPfTaIAOC1tCDurmsno7Sp.jpg":`https://static01.nyt.com/${c[0].url}`}return{descr:a,date:s,title:l,source:r,image:o(),alt:"New`s image"}}));c=t}(e.response.docs),p(c,1)}));var t})),a.addEventListener("input",(function(e){g=e.target.value.trim()}));let s=0,i=0,l=0,r=0,c={};async function o(e){const t=await fetch(e);if(!t.ok)throw new Error(responce.statusText);return t.json()}function p(t,a){var s;i=8*(a-1),l=i+8,s=r,new tui.Pagination(n,{totalItems:s,itemsPerPage:1,visiblePages:3,centerAlign:!0,template:{page:'<a href="#" class="tui-page-btn">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:'<a href="#" class="tui-page-btn tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></a>',disabledMoveButton:'<span class="tui-page-btn tui-is-disabled tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></span>',moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip"><span class="tui-ico-ellip">...</span></a>'}}).on("beforeMove",(e=>{const t=e.page;console.log(e),u(),p(c,t)}));const o=t.map((e=>`<li class="gallery__item">\n                    <img class="gallery__img" src="${e.image}" alt="${e.alt}"/>\n                    <h3 class="gallery__header">${e.title}</h3>\n                    <p class="gallery__text">${e.descr}</p>\n                    <div class="gallery__item-bottom_wrap">\n                        <span class="gallery__date">${e.date}</span>\n                        <a href="${e.source}" target="_blank" rel="noreferrer noopener" class="gallery__link">Read more</a>\n                    </div>\n                </li>`)).slice(i,l);o.splice(2,0,'<li class="gallery__item"></li>');const g=o.join("");e.insertAdjacentHTML("beforeend",g)}function u(){e.innerHTML=""}o("https://api.nytimes.com/svc/mostpopular/v2/viewed/1.json?api-key=pJnhjsndYoXEeiZxcLsx3UMkwINk9PiQ").then((e=>{s=e.results.length,r=Math.ceil(s/8),function(e){const t=e.map((e=>{const t=e.abstract.length>120?e.abstract.slice(0,119)+"...":e.abstract,a=new Date(e.published_date);return{descr:t,date:(new Intl.DateTimeFormat).format(a),title:e.title.length>50?e.title.slice(0,49)+"...":e.title,source:e.url,image:0===e.media.length?"https://t3.ftcdn.net/jpg/04/62/93/66/360_F_462936689_BpEEcxfgMuYPfTaIAOC1tCDurmsno7Sp.jpg":e.media[0]["media-metadata"][2].url,alt:0===e.media.length?"Image is no avalible":e.media[0].caption}}));c=t}(e.results),p(c,1)}));let g="";
//# sourceMappingURL=index.18819be8.js.map
