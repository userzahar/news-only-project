{"mappings":"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","sources":["src/js/news-page.js","src/js/weather.js"],"sourcesContent":["import { mqHandler } from './functions/mqHandler'\n\nconst API_KEY = 'pJnhjsndYoXEeiZxcLsx3UMkwINk9PiQ';\nconst reqUrl = `https://api.nytimes.com/svc/mostpopular/v2/viewed/1.json?api-key=${API_KEY}`;\nconst ICON_HEART = '/sprite.f14d31f7.svg#icon-heart';\nconst galleryRef = document.querySelector('.gallery__list');\nconst formRef = document.querySelector('.search-field');\nconst inputRef = document.querySelector('#search-field__input');\nconst paginationContainer = document.getElementById('pagination');\nimport {weather} from './weather';\nformRef.addEventListener('submit', onSubmit);\ninputRef.addEventListener('input', createReq);\n\nconst emptyCard = `<li class=\"gallery__item\">${weather}</li>`;\nlet totalItems = 0;\nlet srartIndex = 0;\nlet endIndex = 0;\nlet page = 1;\nlet totalPages = 0;\nlet itemsPerPage = 8;\nlet markData = {};\n\nasync function fetchNews(request) {\n  const response = await fetch(request);\n  if (!response.ok) {\n    throw new Error(responce.statusText);\n  }\n  return response.json();\n}\n\nfunction createMarkup(arr, page) {\n  srartIndex = (page - 1) * itemsPerPage;\n  endIndex = srartIndex + itemsPerPage;\n  initPagination(totalPages);\n\n  const markup = arr.map(el => {\n    return `<li class=\"gallery__item\">\n                   <div class=\"gallery__thumb\"> <p class=\"gallery__category\">Job searching</p>\n                    <img class=\"gallery__img\" src=\"${el.image}\" alt=\"${el.alt}\"/>\n                    <div class='gallery__favorite'><p>Add to favorite</p>\n                    <button type=\"button\"></button>\n                    <svg width='16' height='16'><use href=\"${ICON_HEART}\"></use>\n                    </svg></div></div>\n                    <h3 class=\"gallery__header\">${el.title}</h3>\n                    <p class=\"gallery__text\">${el.descr}</p>\n                    <div class=\"gallery__item-bottom_wrap\">\n                        <span class=\"gallery__date\">${el.date}</span>\n                        <a href=\"${el.source}\" target=\"_blank\" rel=\"noreferrer noopener\" class=\"gallery__link\">Read more</a>\n                    </div>\n                </li>`;\n  });\n  const pageMarkup = markup.slice(srartIndex, endIndex);\n  // console.log(pageMarkup);\n  pageMarkup.splice(2, 0, emptyCard);\n  const finishedMkp = pageMarkup.join('');\n  // console.log(finishedMkp);\n  console.log(\"BEFORE\");\n  galleryRef.insertAdjacentHTML('beforeend', finishedMkp);\n  mqHandler(); //додана функція для адаптивного відображення.\n}\n\nfunction normalizePop(feed) {\n  const marks = feed.map(el => {\n    function checkoutDescr() {\n      if (el.abstract.length > 120) {\n        return el.abstract.slice(0, 119) + '...';\n      }\n      return el.abstract;\n    }\n    const descr = checkoutDescr();\n    const dateFormat = new Date(el.published_date);\n    const date = new Intl.DateTimeFormat().format(dateFormat);\n    function ckeckoutTit() {\n      if (el.title.length > 50) {\n        return el.title.slice(0, 49) + '...';\n      }\n      return el.title;\n    }\n    const title = ckeckoutTit();\n    // console.log(title.length);\n    const source = el.url;\n    function checkoutImg() {\n      if (el.media.length === 0) {\n        return 'https://t3.ftcdn.net/jpg/04/62/93/66/360_F_462936689_BpEEcxfgMuYPfTaIAOC1tCDurmsno7Sp.jpg';\n      }\n      return el.media[0]['media-metadata'][2].url;\n    }\n    const image = checkoutImg();\n    function checkoutAlt() {\n      if (el.media.length === 0) {\n        return 'Image is no avalible';\n      }\n      return el.media[0].caption;\n    }\n    const alt = checkoutAlt();\n    // console.log(alt);\n    // console.log(image);\n\n    return { descr, date, title, source, image, alt };\n  });\n  // console.log(marks);\n  markData = marks;\n  // console.log(markData);\n  return markData;\n}\n\nfunction startFetch() {\n  fetchNews(reqUrl).then(res => {\n    // console.log(res.results);\n    totalItems = res.results.length;\n    totalPages = Math.ceil(totalItems / itemsPerPage);\n    normalizePop(res.results);\n    createMarkup(markData, page);\n  });\n}\nstartFetch();\n\nfunction clearMarkup() {\n  galleryRef.innerHTML = '';\n}\n\nfunction normalizeSrc(feed) {\n  const marks = feed.map(el => {\n    function checkoutDescr() {\n      if (el.abstract.length > 120) {\n        return el.abstract.slice(0, 119) + '...';\n      }\n      return el.abstract;\n    }\n    const descr = checkoutDescr();\n    const dateFormat = new Date(el.pub_date);\n    const date = new Intl.DateTimeFormat().format(dateFormat);\n    function ckeckoutTit() {\n      if (el.headline.main.length > 50) {\n        return el.headline.main.slice(0, 49) + '...';\n      }\n      return el.headline.main;\n    }\n    const title = ckeckoutTit();\n    const source = el.web_url;\n    const imagePart = el.multimedia;\n\n    function checkoutImg() {\n      if (imagePart.length === 0) {\n        return 'https://t3.ftcdn.net/jpg/04/62/93/66/360_F_462936689_BpEEcxfgMuYPfTaIAOC1tCDurmsno7Sp.jpg';\n      }\n      return `https://static01.nyt.com/${imagePart[0].url}`;\n    }\n    const image = checkoutImg();\n    const alt = 'New`s image';\n    // console.log(image);\n    return { descr, date, title, source, image, alt };\n  });\n  // console.log(marks);\n  markData = marks;\n  return markData;\n}\n\nfunction onSearch(inputData) {\n  const searchUrl = `https://api.nytimes.com/svc/search/v2/articlesearch.json?q=${inputData}&api-key=${API_KEY}`;\n  fetchNews(searchUrl).then(res => {\n    console.log(res.response.docs);\n    if (res.response.docs.length === 0) {\n      console.log('Empty');\n    }\n    normalizeSrc(res.response.docs);\n    createMarkup(markData, page);\n  });\n}\n\n// onSearch('ukraine');\n\nlet searchReq = '';\nfunction createReq(e) {\n  searchReq = e.target.value.trim();\n  // console.log(searchReq);\n}\nfunction onSubmit(e) {\n  e.preventDefault();\n  clearMarkup();\n  onSearch(searchReq);\n}\n\n// const encoded = encodeURIComponent('crosswords & games'); //crosswords%20&%20games\n\n// пагинация\nfunction initPagination(totalPages) {\n  const pagination = new tui.Pagination(paginationContainer, {\n    totalItems: totalPages,\n    itemsPerPage: 1,\n    visiblePages: 3,\n    centerAlign: true,\n    // firstItemClassName: 'tui-first-child',\n    // lastItemClassName: 'tui-last-child',\n    template: {\n      page: '<a href=\"#\" class=\"tui-page-btn\">{{page}}</a>',\n      currentPage:\n        '<strong class=\"tui-page-btn tui-is-selected\">{{page}}</strong>',\n      moveButton:\n        '<a href=\"#\" class=\"tui-page-btn tui-{{type}}\">' +\n        '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n         \n        '</a>',\n      disabledMoveButton:\n        '<span class=\"tui-page-btn tui-is-disabled tui-{{type}}\">' +\n        '<span class=\"tui-ico-{{type}}\">{{type}}</span>' +\n        '</span>',\n      moreButton:\n        '<a href=\"#\" class=\"tui-page-btn tui-{{type}}-is-ellip\">' +\n        '<span class=\"tui-ico-ellip\">...</span>' +\n        '</a>',\n    },\n  });\n\n  // pagination.disabledMoveButton('first');\n\n  pagination.on('beforeMove', event => {\n    const currentPage = event.page;\n    console.log(event);\n    clearMarkup();\n    createMarkup(markData, currentPage);\n  });\n}\n\n","export let weather = `<div class=\"weather\">\n<div class=\"weather_wrap\">\n<p class=\"weather_degree\">23&deg</p>\n<div class=\"weather_part\">\n<p class=\"weather_character gallery__text\">Sunny</p>\n<button type=\"button\" class=\"weather_location\"><p class=\"weather_country\"></p>West Jakarta</p></button>\n</div>\n</div>\n<img src=\"./images/Sun.png\" width=\"121\" class=\"weather_image\">\n<p class=\"weather_character alighn\">Mon<br>\n21 Jan 2021</p>\n<button type=\"button\" class=\"weather_week\"><p class=\"\">weather for week</p></button>\n</div>`"],"names":["$bpxeT","parcelRequire","$a16cecbc08470bcf$var$API_KEY","$a16cecbc08470bcf$var$reqUrl","concat","$a16cecbc08470bcf$var$galleryRef","document","querySelector","$a16cecbc08470bcf$var$formRef","$a16cecbc08470bcf$var$inputRef","$a16cecbc08470bcf$var$paginationContainer","getElementById","addEventListener","e","preventDefault","$a16cecbc08470bcf$var$clearMarkup","inputData","$a16cecbc08470bcf$var$searchReq","$a16cecbc08470bcf$var$fetchNews","then","res","feed","marks","console","log","response","docs","length","map","el","checkoutDescr","abstract","slice","descr","dateFormat","Date","pub_date","date","Intl","DateTimeFormat","format","ckeckoutTit","headline","main","title","source","web_url","imagePart","multimedia","checkoutImg","url","image","alt","$a16cecbc08470bcf$var$createMarkup","$a16cecbc08470bcf$var$markData","target","value","trim","$a16cecbc08470bcf$var$emptyCard","$a16cecbc08470bcf$var$totalItems","$a16cecbc08470bcf$var$srartIndex","$a16cecbc08470bcf$var$endIndex","$a16cecbc08470bcf$var$totalPages","request","$a16cecbc08470bcf$var$_fetchNews","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","fetch","_ctx","sent","ok","Error","responce","statusText","json","arr","page1","totalPages1","tui","Pagination","totalItems","itemsPerPage","visiblePages","centerAlign","template","page","currentPage","moveButton","disabledMoveButton","moreButton","on","event","pageMarkup","splice","finishedMkp","join","insertAdjacentHTML","$31XKK","mqHandler","innerHTML","results","Math","ceil","published_date","media","caption"],"version":3,"file":"index.d4be737a.js.map"}